
<!-- 跟踪对话框 -->
<div class="modal fade" id="stepDialog" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="width: 800px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">流程跟踪</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-12 col-sm-12 form-horizontal">
                        <div class="form-group formSep">
                            <label class="col-lg-2 control-label">需求名称</label>
                            <div class="col-lg-10">
                                <p class="form-control-static">{{demand.requName}}</p>
                            </div>
                        </div>
                        <div class="form-group formSep">
                            <label class="col-lg-2 control-label">当前状态</label>
                            <div class="col-lg-10">
                                <p class="form-control-static">{{demand.approState | DM_appro_state}}</p>
                            </div>
                        </div>
                        <div class="form-group formSep">
                            <label class="col-lg-2 control-label">流程进度</label>
                            <div class="col-lg-10">
                                <ul class="stepy-titles clearfix">
                                    <li ng-class="{'success-step' : reqStep.step1[0].state == 'success' , 'active-step' : reqStep.step1[0].state == 'active' }">
                                        <div>需求阶段</div>
                                      <!--    <span>{{reqStep.step1[0].date}}</span> -->
                                        <span class="stepNb">一</span>
                                    </li>
                                    <li ng-class="{'success-step' : reqStep.step1[1].state == 'success' , 'active-step' : reqStep.step1[1].state == 'active' }">
                                        <div>执行阶段</div>
                                       <!-- <span>{{reqStep.step1[1].date || '等待'}}</span> -->
                                        <span class="stepNb">二</span>
                                    </li>
                                    <li ng-class="{'success-step' : reqStep.step1[2].state == 'success' , 'active-step' : reqStep.step1[2].state == 'active' }">
                                        <div>成果阶段</div>
                                        <span class="stepNb">三</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-lg-2 control-label">流程阶段</label>
                            <div class="col-lg-10">
                                <ul class="stepy-titles stepy-ms clearfix">
                                    <li ng-repeat="step in reqStep.step2" ng-class="{'success-step' : step.state == 'success' , 'active-step' : step.state == 'active' }">
                                        <div>{{step.name | DM_task_code}}</div>
                                        <span>{{step.date | date:'yyyy-MM-dd'}}</span>
                                        <span>{{step.author }}</span>
                                        <span class="stepNb">{{$index + 1}}</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-lg-2 control-label">需求跟踪</label>
                            <div class="col-lg-10">
                                <table class="table table-striped table-bordered table-condensed">
                                    <thead>
                                    <tr>
                                        <th>操作人</th>
                                        <th>流程阶段</th>
                                        <th>操作</th>
                                        <th>处理信息</th>
                                        <th>会签信息</th>
                                        <th>处理时间</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr class="rowlink" ng-repeat="log in reqStep.logList">
                                        <td>{{log.author}}</td>
                                        <td>{{log.name}}</td>
                                        <td>{{log.operate}}</td>
                                        <td>{{log.desc}}</td>
                                        <td>{{log.signature}}</td>
                                        <td>{{log.date | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div><!-- /.modal -->
